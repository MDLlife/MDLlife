!function(e){function t(e,t){t=t.replace(/\b(0(?!\b))+/g,"");var a=t.replace(/( |\(|\)|\.|\-)/g,"");return!(a.length>19||a.length<6)}function a(e){var t;return"dd/mm/yyyy"==o&&(t=/^(((0[1-9]|[12]\d|3[01])\/(0[13578]|1[02])\/((19|[2-9]\d)\d{2}))|((0[1-9]|[12]\d|30)\/(0[13456789]|1[012])\/((19|[2-9]\d)\d{2}))|((0[1-9]|1\d|2[0-8])\/02\/((19|[2-9]\d)\d{2}))|(29\/02\/((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$/g),"dd-mm-yyyy"==o?t=/^(((0[1-9]|[12]\d|3[01])-(0[13578]|1[02])-((19|[2-9]\d)\d{2}))|((0[1-9]|[12]\d|30)-(0[13456789]|1[012])-((19|[2-9]\d)\d{2}))|((0[1-9]|1\d|2[0-8])-02-((19|[2-9]\d)\d{2}))|(29-02-((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$/g:"mm-dd-yyyy"==o&&(t=/^(((0[13578]|1[02])-(0[1-9]|[12]\d|3[01])-((19|[2-9]\d)\d{2}))|((0[13456789]|1[012])-(0[1-9]|[12]\d|30)-((19|[2-9]\d)\d{2}))|(02-(0[1-9]|1\d|2[0-8])-((19|[2-9]\d)\d{2}))|(02-29-((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$/g),!!t.test(e)}function r(e,t){var a=t||window.event,r=a.keyCode||a.which;r=String.fromCharCode(r);var o=/[ +0-9()-]/;"date"==e&&(o=/[ 0-9-]/,e=0),(!o.test(r)||e>19)&&(a.returnValue=!1,r=a.keyCode,a.preventDefault&&9!=r&&8!=r&&a.preventDefault())}var o,n="sib",s="mm-dd-yyyy";if(o=e("input[name='hdn_new_format']").length?s:"dd/mm/yyyy",e(".tooltip").css({left:"101%"}),e("#"+n+"_embed_signup ."+n+"-container").find(".hidden-btns").remove(),e("#"+n+"_embed_signup ."+n+"-container").find(".message_area").remove(),e("body").on("submit","#sib_embed_signup1 #theform1,#sib_embed_signup #theform",function(){var r=e(this);if(r.hasClass(n+"_processing"))return!1;var s=r.closest(".forms-builder-wrapper");s.find("#"+n+"_loading_gif_area").width(r.width()).height(r.height());var l=r.find("#req_hid").val();l="email"==("undefined"==s.find("#primary_type").val()?"email":s.find("#primary_type").val())?"email"+l:"SMS"+l;var d=l.split("~"),u=s.find("#"+n+"_embed_signup_lang").val(),c="Please complete this field.",p=s.find("#"+n+"_embed_invalid_email_message").val(),f="The SMS field must contain between 6 and 19 digits.",h="Invalid date format";for("fr"==u?(c="Merci de remplir ce champ.",f="Le champ SMS doit contenir entre 6 et 19 chiffres.",h="Date de format invalide"):"es"==u?(c="Por favor, complete este campo",f="El campo SMS debe contener entre 6 y 19 cifras.",h="Formato de fecha no válido"):"pt"==u?(c="Preencha este campo.",f="O campo SMS deve conter entre 6 e 19 dígitos.",h="O formato da data é inválido"):"it"==u?(c="Compilare questo campo.",f="Il campo SMS deve contenere dai 6 ai 19 caratteri.",h="Il formato della data non è valido"):"de"==u&&(c="Bitte füllen Sie dieses Feld aus.",f="Das SMS-Feld muss 6 bis 19 Ziffern enthalten.",h="Ungültiges Datumsformat"),r.find("div.alert").remove(),r.find(".message_area").remove(),i=0;i<d.length;i++){var g=r.find('input[name="'+d[i]+'"]'),v=g.attr("type");if("text"==v)""==g.val()||g.val()==c?(g.closest(".row").addClass("needsfilled"),g.closest(".row").append('<div class="message_area" style="background-color: #f2dede;border:1px solid #ebccd1; color: #a94442;margin-top: 5px;"><button type="button" class="close">x</button>'+c+"</div>")):"email"==d[i]?/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(g.val())?g.closest(".row").removeClass("needsfilled"):(g.closest(".row").addClass("needsfilled"),g.closest(".row").append('<div class="message_area" style="background-color: #f2dede;border:1px solid #ebccd1; color: #a94442;margin-top: 15px;"><button type="button" class="close">x</button>'+p+"</div>"),g.val("")):"SMS"==d[i]&&e("#sms_prefix").length&&""==e("#sms_prefix").val()?(g.closest(".row").addClass("needsfilled"),g.closest(".row").append('<div class="alert alert-danger" style="width: '+alert_width+alert_padding+'"><button type="button" class="close" style="'+button_style+'">x</button>'+c+"</div>")):g.closest(".row").removeClass("needsfilled");else if("radio"==v)0==g.is(":checked")&&(g.closest(".row").addClass("needsfilled"),g.closest(".row").append('<div class="message_area" style="background-color: #f2dede;border:1px solid #ebccd1; color: #a94442;margin-top: 5px;"><button type="button" class="close">x</button>'+c+"</div>"));else if("Captcha"==d[i]&&"undefined"!=typeof grecaptcha){var b=grecaptcha.getResponse();0==b.length?(e(".captcha > div.row").addClass("needsfilled"),e(".captcha > div.row").append('<div class="message_area" style="background-color: #f2dede;border:1px solid #ebccd1; color: #a94442;margin-top: 5px;"><button type="button" class="close">x</button>'+c+"</div>")):e(".captcha > div.row").removeClass("needsfilled")}else{var m=g.serializeArray();0==m.length?g.closest(".row").addClass("needsfilled"):g.closest(".row").removeClass("needsfilled")}}if(e(".row").each(function(){var r=e(this).find("span"),n=e(this).find("input"),s=n.width()+10,i=e(this).find("#sms_prefix").length>0?e(this).find("#sms_prefix").val():"";"SMS"==n.attr("name")&&(t(n,i+n.val())||""==n.val()||(n.closest(".row").addClass("needsfilled"),n.closest(".row").append('<div class="message_area" style="background-color: #f2dede;border:1px solid #ebccd1; color: #a94442;margin-top: 5px;width:'+s+';"><button type="button" class="close">x</button>'+f+"</div>"),n.val(""))),r.text()==o&&(a(n.val())||""==n.val()||(n.closest(".row").addClass("needsfilled"),n.closest(".row").append('<div class="message_area" style="background-color: #f2dede;border:1px solid #ebccd1; color: #a94442;margin-top: 5px;width:'+s+';"><button type="button" class="close">x</button>'+h+"</div>"),n.val("")))}),e("div.message_area button.close").on("click",function(){e(this).parent().remove()}),r.find("input").closest(".row").hasClass("needsfilled")||e(".captcha > div.row").hasClass("needsfilled"))return!1;var y=r.attr("action"),S=r.serialize();return r.addClass(n+"_processing"),r.parent().find("#"+n+"_loading_gif_area").show(),r.css("opacity","0.5"),e.ajax({url:y,data:S,dataType:"json",type:"POST",beforeSend:function(){},success:function(t){var a=e("."+n+"_processing");if(a.parent().find("#"+n+"_loading_gif_area").hide(),a.css("opacity","1"),void 0!=t.result){"success"==t.result.result||"emailExist"==t.result.result||"OK"==t.result.result||"OK_UPDATE"==t.result.result?(backColor="#dff0d8",borderColor="#d6e9c6",color="#ffffff",e(".sub-mob-alert").hide(),setTimeout(function(){e(".message_area").remove(),e(".sub-mob-alert").show()},3e3)):(backColor="#f2dede",borderColor="#ebccd1",color="#a94442");var r='<div class="message_area" style="background-color: '+backColor+";border:1px solid "+borderColor+"; color: "+color+'"><button type="button" class="close">x</button>';if("success"==t.result.result||"OK"==t.result.result){if(window.location.pathname.indexOf("ru")<0&&window.location.pathname.indexOf("zh")<0&&(r+="Awesome!<br>Now you are subscribed on MDL News"),window.location.pathname.indexOf("ru")>0&&(r+="Ура!<br>Теперь вы подписаны на MDL новости"),window.location.pathname.indexOf("zh")>0&&(r+="这么好！<br>现在您订阅MDL的新闻"),""!=t.result.smsExist){var o="",s=t.result.smsExist;o=t.result.smsExist_msg.split("[number]"),r+=". "+o[0]+s+o[1]}a.find("div.email-group input[type='text']").val(""),a.find("div.sms-group input[type='text']").val(""),""!=t.result.url_redirect&&(location.href=t.result.url_redirect)}else if("sms_emailExist"==t.result.result){var i="",l=t.result.emailExist;i=t.result.emailExist_msg.split("[address]"),r+=". "+i[0]+l+i[1]}else if("invalid_request"==t.result.result||"invalidEmail"==t.result.result)r+=t.result.invalid_err_msg;else if("invalidSms"==t.result.result)r+=t.result.invalidSms_msg;else if("emailExist"==t.result.result||"OK_UPDATE"==t.result.result){if(r+=t.result.exist_err_msg,""!=t.result.smsExist){var o="",s=t.result.smsExist;o=t.result.smsExist_msg.split("[number]"),r+=". "+o[0]+s+o[1]}}else"dateFormat"==t.result.result||"reqMiss"==t.result.result?r+=t.result.general_err_msg:"invalidCaptcha"==t.result.result&&(r+=t.result.general_err_msg);r+="</div>",a.find("."+n+"-container").prepend(r),e("div.message_area button.close").on("click",function(){e(this).parent().remove()}),a.removeClass(n+"_processing")}}}),!1}),e("#"+n+"_embed_signup :input").on("click",function(){e(this).closest(".row").hasClass("needsfilled")&&(e(this).closest(".row").find("div.message_area").remove(),e(this).val(""),"radio"==e(this).attr("type")&&e(this).val("1"),e(this).closest(".row").removeClass("needsfilled"))}),e("#"+n+"_embed_signup input[type=radio]").on("click",function(){e(this).closest(".row").hasClass("needsfilled")&&(e(this).attr("checked",!0),e(this).closest(".row").find("div.message_area").remove(),e(this).closest(".row").removeClass("needsfilled"))}),e("input").on("keypress",function(t){e(this).closest(".row").find("."+n+"_dateformat").length>0&&r("date",t)}),e("#SMS").on("keypress",function(t){r(e(this).val().length,t)}),e("input[type=number]").on("keypress",function(t){var a=t||window.event,r=a.keyCode||a.which;if(r=String.fromCharCode(r),!/[0-9]/.test(r)){a.returnValue=!1,r=a.keyCode,a.preventDefault&&9!=r&&8!=r&&a.preventDefault();var o=e(this).closest(".row"),s=o.closest(".forms-builder-wrapper").find("#"+n+"_embed_signup_lang").val(),i="Please enter a number.";"fr"==s?i="Veuillez entrer un nombre.":"es"==s?i="Please enter a number.":"pt"==s?i="Please enter a number.":"it"==s?i="Please enter a number.":"de"==s&&(i="Please enter a number."),o.find(".message_area").length||o.append('<div class="message_area" style="background-color: #f2dede;border:1px solid #ebccd1; color: #a94442"><button type="button" class="close">x</button>'+i+"</div>")}}),e(document).on("click",".message_area .close",function(){e(this).closest(".message_area").remove()}),e(document).on("click",".sib-dropdown-toggle.country-flg",function(){e(".country-block ul").toggle()}),e(document).on("click",".country-block ul li a",function(){var t=e(this).data("code"),a=e(this).data("c_code");e(".sib-dropdown-toggle .cflags").attr("class","cflags"),e(".sib-dropdown-toggle .cflags").addClass(a),e("#sms_prefix").val("+"+t),e(".country-block ul").hide()}),e(document).bind("click",function(t){e(t.target).parents().hasClass("country-block")||e(".country-block ul").hide()}),e(".sms_field .country-block").length){var l=e(".sib-dropdown-toggle .cflags").attr("class").split(" ");if(l[1]&&""!=l[1]){var d=e(".sib-dropdown-menu").find('[data-c_code="'+l[1]+'"]').data("code");e("#sms_prefix").val("+"+d)}else{e(".sib-dropdown-toggle .cflags").addClass("FR");var d=e(".sib-dropdown-menu").find('[data-c_code="FR"]').data("code");e("#sms_prefix").val("+"+d)}}e("#hdn_email_txt").val((new Date).getTime())}(jQuery),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var a,r,o,n,s,i=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(n=l.length,a=0;a<n;a+=1)s[a]=str(a,l)||"null";return o=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+i+"]":"["+s.join(",")+"]",gap=i,o}if(rep&&"object"==typeof rep)for(n=rep.length,a=0;a<n;a+=1)"string"==typeof rep[a]&&(r=rep[a],(o=str(r,l))&&s.push(quote(r)+(gap?": ":":")+o));else for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(o=str(r,l))&&s.push(quote(r)+(gap?": ":":")+o);return o=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+i+"}":"{"+s.join(",")+"}",gap=i,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,a){var r;if(gap="",indent="","number"==typeof a)for(r=0;r<a;r+=1)indent+=" ";else"string"==typeof a&&(indent=a);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var a,r,o=e[t];if(o&&"object"==typeof o)for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(r=walk(o,a),void 0!==r?o[a]=r:delete o[a]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t){"use strict";var a=e.History=e.History||{},r=e.jQuery;if(void 0!==a.Adapter)throw new Error("History.js Adapter has already been loaded...");a.Adapter={bind:function(e,t,a){r(e).bind(t,a)},trigger:function(e,t,a){r(e).trigger(t,a)},extractEventData:function(e,a,r){return a&&a.originalEvent&&a.originalEvent[e]||r&&r[e]||t},onDomLoad:function(e){r(e)}},void 0!==a.init&&a.init()}(window),function(e,t){"use strict";var a=e.document,r=e.setTimeout||r,o=e.clearTimeout||o,n=e.setInterval||n,s=e.History=e.History||{};if(void 0!==s.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");s.initHtml4=function(){if(void 0!==s.initHtml4.initialized)return!1;s.initHtml4.initialized=!0,s.enabled=!0,s.savedHashes=[],s.isLastHash=function(e){var t=s.getHashByIndex();return e===t},s.isHashEqual=function(e,t){return e=encodeURIComponent(e).replace(/%25/g,"%"),t=encodeURIComponent(t).replace(/%25/g,"%"),e===t},s.saveHash=function(e){return!s.isLastHash(e)&&(s.savedHashes.push(e),!0)},s.getHashByIndex=function(e){return void 0===e?s.savedHashes[s.savedHashes.length-1]:e<0?s.savedHashes[s.savedHashes.length+e]:s.savedHashes[e]},s.discardedHashes={},s.discardedStates={},s.discardState=function(e,t,a){var r,o=s.getHashByState(e);return r={discardedState:e,backState:a,forwardState:t},s.discardedStates[o]=r,!0},s.discardHash=function(e,t,a){var r={discardedHash:e,backState:a,forwardState:t};return s.discardedHashes[e]=r,!0},s.discardedState=function(e){var t=s.getHashByState(e);return s.discardedStates[t]||!1},s.discardedHash=function(e){return s.discardedHashes[e]||!1},s.recycleState=function(e){var t=s.getHashByState(e);return s.discardedState(e)&&delete s.discardedStates[t],!0},s.emulated.hashChange&&(s.hashChangeInit=function(){s.checkerFunction=null;var t,r,o,i,l="",d=Boolean(s.getHash());return s.isInternetExplorer()?(t="historyjs-iframe",r=a.createElement("iframe"),r.setAttribute("id",t),r.setAttribute("src","#"),r.style.display="none",a.body.appendChild(r),r.contentWindow.document.open(),r.contentWindow.document.close(),o="",i=!1,s.checkerFunction=function(){if(i)return!1;i=!0;var t=s.getHash(),a=s.getHash(r.contentWindow.document);return t!==l?(l=t,a!==t&&(o=a=t,r.contentWindow.document.open(),r.contentWindow.document.close(),r.contentWindow.document.location.hash=s.escapeHash(t)),s.Adapter.trigger(e,"hashchange")):a!==o&&(o=a,d&&""===a?s.back():s.setHash(a,!1)),i=!1,!0}):s.checkerFunction=function(){var t=s.getHash()||"";return t!==l&&(l=t,s.Adapter.trigger(e,"hashchange")),!0},s.intervalList.push(n(s.checkerFunction,s.options.hashChangeInterval)),!0},s.Adapter.onDomLoad(s.hashChangeInit)),s.emulated.pushState&&(s.onHashChange=function(t){var a,r=t&&t.newURL||s.getLocationHref(),o=s.getHashByUrl(r),n=null;return s.isLastHash(o)?(s.busy(!1),!1):(s.doubleCheckComplete(),s.saveHash(o),o&&s.isTraditionalAnchor(o)?(s.Adapter.trigger(e,"anchorchange"),s.busy(!1),!1):(n=s.extractState(s.getFullUrl(o||s.getLocationHref()),!0),s.isLastSavedState(n)?(s.busy(!1),!1):(s.getHashByState(n),a=s.discardedState(n),a?(s.getHashByIndex(-2)===s.getHashByState(a.forwardState)?s.back(!1):s.forward(!1),!1):(s.pushState(n.data,n.title,encodeURI(n.url),!1),!0))))},s.Adapter.bind(e,"hashchange",s.onHashChange),s.pushState=function(t,a,r,o){if(r=encodeURI(r).replace(/%25/g,"%"),s.getHashByUrl(r))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==o&&s.busy())return s.pushQueue({scope:s,callback:s.pushState,args:arguments,queue:o}),!1;s.busy(!0);var n=s.createStateObject(t,a,r),i=s.getHashByState(n),l=s.getState(!1),d=s.getHashByState(l),u=s.getHash(),c=s.expectedStateId==n.id;return s.storeState(n),s.expectedStateId=n.id,s.recycleState(n),s.setTitle(n),i===d?(s.busy(!1),!1):(s.saveState(n),c||s.Adapter.trigger(e,"statechange"),!s.isHashEqual(i,u)&&!s.isHashEqual(i,s.getShortUrl(s.getLocationHref()))&&s.setHash(i,!1),s.busy(!1),!0)},s.replaceState=function(t,a,r,o){if(r=encodeURI(r).replace(/%25/g,"%"),s.getHashByUrl(r))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==o&&s.busy())return s.pushQueue({scope:s,callback:s.replaceState,args:arguments,queue:o}),!1;s.busy(!0);var n=s.createStateObject(t,a,r),i=s.getHashByState(n),l=s.getState(!1),d=s.getHashByState(l),u=s.getStateByIndex(-2);return s.discardState(l,n,u),i===d?(s.storeState(n),s.expectedStateId=n.id,s.recycleState(n),s.setTitle(n),s.saveState(n),s.Adapter.trigger(e,"statechange"),s.busy(!1)):s.pushState(n.data,n.title,n.url,!1),!0}),s.emulated.pushState&&s.getHash()&&!s.emulated.hashChange&&s.Adapter.onDomLoad(function(){s.Adapter.trigger(e,"hashchange")})},void 0!==s.init&&s.init()}(window),function(e,t){"use strict";var a=e.console||t,r=e.document,o=e.navigator,n=!1,s=e.setTimeout,i=e.clearTimeout,l=e.setInterval,d=e.clearInterval,u=e.JSON,c=e.alert,p=e.History=e.History||{},f=e.history;try{n=e.sessionStorage,n.setItem("TEST","1"),n.removeItem("TEST")}catch(e){n=!1}if(u.stringify=u.stringify||u.encode,u.parse=u.parse||u.decode,void 0!==p.init)throw new Error("History.js Core has already been loaded...");p.init=function(e){return void 0!==p.Adapter&&(void 0!==p.initCore&&p.initCore(),void 0!==p.initHtml4&&p.initHtml4(),!0)},p.initCore=function(h){if(void 0!==p.initCore.initialized)return!1;if(p.initCore.initialized=!0,p.options=p.options||{},p.options.hashChangeInterval=p.options.hashChangeInterval||100,p.options.safariPollInterval=p.options.safariPollInterval||500,p.options.doubleCheckInterval=p.options.doubleCheckInterval||500,p.options.disableSuid=p.options.disableSuid||!1,p.options.storeInterval=p.options.storeInterval||1e3,p.options.busyDelay=p.options.busyDelay||250,p.options.debug=p.options.debug||!1,p.options.initialTitle=p.options.initialTitle||r.title,p.options.html4Mode=p.options.html4Mode||!1,p.options.delayInit=p.options.delayInit||!1,p.intervalList=[],p.clearAllIntervals=function(){var e,t=p.intervalList;if(void 0!==t&&null!==t){for(e=0;e<t.length;e++)d(t[e]);p.intervalList=null}},p.debug=function(){(p.options.debug||!1)&&p.log.apply(p,arguments)},p.log=function(){var e,t,o,n,s,i=void 0!==a&&void 0!==a.log&&void 0!==a.log.apply,l=r.getElementById("log");for(i?(n=Array.prototype.slice.call(arguments),e=n.shift(),void 0!==a.debug?a.debug.apply(a,[e,n]):a.log.apply(a,[e,n])):e="\n"+arguments[0]+"\n",t=1,o=arguments.length;t<o;++t){if("object"==typeof(s=arguments[t])&&void 0!==u)try{s=u.stringify(s)}catch(e){}e+="\n"+s+"\n"}return l?(l.value+=e+"\n-----\n",l.scrollTop=l.scrollHeight-l.clientHeight):i||c(e),!0},p.getInternetExplorerMajorVersion=function(){return p.getInternetExplorerMajorVersion.cached=void 0!==p.getInternetExplorerMajorVersion.cached?p.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=r.createElement("div"),a=t.getElementsByTagName("i");(t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e")&&a[0];);return e>4&&e}()},p.isInternetExplorer=function(){return p.isInternetExplorer.cached=void 0!==p.isInternetExplorer.cached?p.isInternetExplorer.cached:Boolean(p.getInternetExplorerMajorVersion())},p.options.html4Mode?p.emulated={pushState:!0,hashChange:!0}:p.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(o.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(o.userAgent)),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in r)||p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8)},p.enabled=!p.emulated.pushState,p.bugs={setHash:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===o.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(o.userAgent)),safariPoll:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===o.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(o.userAgent)),ieDoubleCheck:Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<7)},p.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},p.cloneObject=function(e){var t,a;return e?(t=u.stringify(e),a=u.parse(t)):a={},a},p.getRootUrl=function(){var e=r.location.protocol+"//"+(r.location.hostname||r.location.host);return r.location.port&&(e+=":"+r.location.port),e+="/"},p.getBaseHref=function(){var e=r.getElementsByTagName("base"),t=null,a="";return 1===e.length&&(t=e[0],a=t.href.replace(/[^\/]+$/,"")),a=a.replace(/\/+$/,""),a&&(a+="/"),a},p.getBaseUrl=function(){return p.getBaseHref()||p.getBasePageUrl()||p.getRootUrl()},p.getPageUrl=function(){var e=p.getState(!1,!1),t=(e||{}).url||p.getLocationHref();return t.replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,a){return/\./.test(e)?e:e+"/"})},p.getBasePageUrl=function(){return p.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,a){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/"},p.getFullUrl=function(e,t){var a=e,r=e.substring(0,1);return t=void 0===t||t,/[a-z]+\:\/\//.test(e)||(a="/"===r?p.getRootUrl()+e.replace(/^\/+/,""):"#"===r?p.getPageUrl().replace(/#.*/,"")+e:"?"===r?p.getPageUrl().replace(/[\?#].*/,"")+e:t?p.getBaseUrl()+e.replace(/^(\.\/)+/,""):p.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),a.replace(/\#$/,"")},p.getShortUrl=function(e){var t=e,a=p.getBaseUrl(),r=p.getRootUrl();return p.emulated.pushState&&(t=t.replace(a,"")),t=t.replace(r,"/"),p.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},p.getLocationHref=function(e){return e=e||r,e.URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash?e.location.href:-1==e.URL.indexOf("#")&&-1!=e.location.href.indexOf("#")?e.location.href:e.URL||e.location.href},p.store={},p.idToState=p.idToState||{},p.stateToId=p.stateToId||{},p.urlToId=p.urlToId||{},p.storedStates=p.storedStates||[],p.savedStates=p.savedStates||[],p.normalizeStore=function(){p.store.idToState=p.store.idToState||{},p.store.urlToId=p.store.urlToId||{},p.store.stateToId=p.store.stateToId||{}},p.getState=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var a=p.getLastSavedState();return!a&&t&&(a=p.createStateObject()),e&&(a=p.cloneObject(a),a.url=a.cleanUrl||a.url),a},p.getIdByState=function(e){var t,a=p.extractId(e.url);if(!a)if(t=p.getStateString(e),void 0!==p.stateToId[t])a=p.stateToId[t];else if(void 0!==p.store.stateToId[t])a=p.store.stateToId[t];else{for(;a=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),void 0!==p.idToState[a]||void 0!==p.store.idToState[a];);p.stateToId[t]=a,p.idToState[a]=e}return a},p.normalizeState=function(e){var t,a;return e&&"object"==typeof e||(e={}),void 0!==e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),t={},t.normalized=!0,t.title=e.title||"",t.url=p.getFullUrl(e.url?e.url:p.getLocationHref()),t.hash=p.getShortUrl(t.url),t.data=p.cloneObject(e.data),t.id=p.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,a=!p.isEmptyObject(t.data),(t.title||a)&&!0!==p.options.disableSuid&&(t.hash=p.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=p.getFullUrl(t.hash),(p.emulated.pushState||p.bugs.safariPoll)&&p.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},p.createStateObject=function(e,t,a){var r={data:e,title:t,url:a};return r=p.normalizeState(r)},p.getStateById=function(e){return e=String(e),p.idToState[e]||p.store.idToState[e]||t},p.getStateString=function(e){var t,a;return t=p.normalizeState(e),a={data:t.data,title:e.title,url:e.url},u.stringify(a)},p.getStateId=function(e){var t;return t=p.normalizeState(e),t.id},p.getHashByState=function(e){var t;return t=p.normalizeState(e),t.hash},p.extractId=function(e){var t,a;return a=-1!=e.indexOf("#")?e.split("#")[0]:e,t=/(.*)\&_suid=([0-9]+)$/.exec(a),t?t[1]||e:e,(t?String(t[2]||""):"")||!1},p.isTraditionalAnchor=function(e){return!/[\/\?\.]/.test(e)},p.extractState=function(e,t){var a,r,o=null;return t=t||!1,a=p.extractId(e),a&&(o=p.getStateById(a)),o||(r=p.getFullUrl(e),a=p.getIdByUrl(r)||!1,a&&(o=p.getStateById(a)),!o&&t&&!p.isTraditionalAnchor(e)&&(o=p.createStateObject(null,null,r))),o},p.getIdByUrl=function(e){return p.urlToId[e]||p.store.urlToId[e]||t},p.getLastSavedState=function(){return p.savedStates[p.savedStates.length-1]||t},p.getLastStoredState=function(){return p.storedStates[p.storedStates.length-1]||t},p.hasUrlDuplicate=function(e){var t;return t=p.extractState(e.url),t&&t.id!==e.id},p.storeState=function(e){return p.urlToId[e.url]=e.id,p.storedStates.push(p.cloneObject(e)),e},p.isLastSavedState=function(e){var t,a,r,o=!1;return p.savedStates.length&&(t=e.id,a=p.getLastSavedState(),r=a.id,o=t===r),o},p.saveState=function(e){return!p.isLastSavedState(e)&&(p.savedStates.push(p.cloneObject(e)),!0)},p.getStateByIndex=function(e){return void 0===e?p.savedStates[p.savedStates.length-1]:e<0?p.savedStates[p.savedStates.length+e]:p.savedStates[e]},p.getCurrentIndex=function(){return p.savedStates.length<1?0:p.savedStates.length-1},p.getHash=function(e){var t=p.getLocationHref(e);return p.getHashByUrl(t)},p.unescapeHash=function(e){var t=p.normalizeHash(e);return t=decodeURIComponent(t)},p.normalizeHash=function(e){return e.replace(/[^#]*#/,"").replace(/#.*/,"")},p.setHash=function(e,t){var a,o;return!1!==t&&p.busy()?(p.pushQueue({scope:p,callback:p.setHash,args:arguments,queue:t}),!1):(p.busy(!0),a=p.extractState(e,!0),a&&!p.emulated.pushState?p.pushState(a.data,a.title,a.url,!1):p.getHash()!==e&&(p.bugs.setHash?(o=p.getPageUrl(),p.pushState(null,null,o+"#"+e,!1)):r.location.hash=e),p)},p.escapeHash=function(t){var a=p.normalizeHash(t);return a=e.encodeURIComponent(a),p.bugs.hashEscape||(a=a.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),a},p.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=p.unescapeHash(t)},p.setTitle=function(e){var t,a=e.title;a||(t=p.getStateByIndex(0))&&t.url===e.url&&(a=t.title||p.options.initialTitle);try{r.getElementsByTagName("title")[0].innerHTML=a.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return r.title=a,p},p.queues=[],p.busy=function(e){if(void 0!==e?p.busy.flag=e:void 0===p.busy.flag&&(p.busy.flag=!1),!p.busy.flag){i(p.busy.timeout);var t=function(){var e,a,r;if(!p.busy.flag)for(e=p.queues.length-1;e>=0;--e)a=p.queues[e],0!==a.length&&(r=a.shift(),p.fireQueueItem(r),p.busy.timeout=s(t,p.options.busyDelay))};p.busy.timeout=s(t,p.options.busyDelay)}return p.busy.flag},p.busy.flag=!1,p.fireQueueItem=function(e){return e.callback.apply(e.scope||p,e.args||[])},p.pushQueue=function(e){return p.queues[e.queue||0]=p.queues[e.queue||0]||[],p.queues[e.queue||0].push(e),p},p.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),void 0!==t&&(e.queue=t),p.busy()?p.pushQueue(e):p.fireQueueItem(e),p},p.clearQueue=function(){return p.busy.flag=!1,p.queues=[],p},p.stateChanged=!1,p.doubleChecker=!1,p.doubleCheckComplete=function(){return p.stateChanged=!0,p.doubleCheckClear(),p},p.doubleCheckClear=function(){return p.doubleChecker&&(i(p.doubleChecker),p.doubleChecker=!1),p},p.doubleCheck=function(e){return p.stateChanged=!1,p.doubleCheckClear(),p.bugs.ieDoubleCheck&&(p.doubleChecker=s(function(){return p.doubleCheckClear(),p.stateChanged||e(),!0},p.options.doubleCheckInterval)),p},p.safariStatePoll=function(){var t,a=p.extractState(p.getLocationHref());if(!p.isLastSavedState(a))return t=a,t||(t=p.createStateObject()),p.Adapter.trigger(e,"popstate"),p},p.back=function(e){return!1!==e&&p.busy()?(p.pushQueue({scope:p,callback:p.back,args:arguments,queue:e}),!1):(p.busy(!0),p.doubleCheck(function(){p.back(!1)}),f.go(-1),!0)},p.forward=function(e){return!1!==e&&p.busy()?(p.pushQueue({scope:p,callback:p.forward,args:arguments,queue:e}),!1):(p.busy(!0),p.doubleCheck(function(){p.forward(!1)}),f.go(1),!0)},p.go=function(e,t){var a;if(e>0)for(a=1;a<=e;++a)p.forward(t);else{if(!(e<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(a=-1;a>=e;--a)p.back(t)}return p},p.emulated.pushState){var g=function(){};p.pushState=p.pushState||g,p.replaceState=p.replaceState||g}else p.onPopState=function(t,a){var r,o,n=!1,s=!1;return p.doubleCheckComplete(),r=p.getHash(),r?(o=p.extractState(r||p.getLocationHref(),!0),o?p.replaceState(o.data,o.title,o.url,!1):(p.Adapter.trigger(e,"anchorchange"),p.busy(!1)),p.expectedStateId=!1,!1):(n=p.Adapter.extractEventData("state",t,a)||!1,s=n?p.getStateById(n):p.expectedStateId?p.getStateById(p.expectedStateId):p.extractState(p.getLocationHref()),s||(s=p.createStateObject(null,null,p.getLocationHref())),p.expectedStateId=!1,p.isLastSavedState(s)?(p.busy(!1),!1):(p.storeState(s),p.saveState(s),p.setTitle(s),p.Adapter.trigger(e,"statechange"),p.busy(!1),!0))},p.Adapter.bind(e,"popstate",p.onPopState),p.pushState=function(t,a,r,o){if(p.getHashByUrl(r)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==o&&p.busy())return p.pushQueue({scope:p,callback:p.pushState,args:arguments,queue:o}),!1;p.busy(!0);var n=p.createStateObject(t,a,r);return p.isLastSavedState(n)?p.busy(!1):(p.storeState(n),p.expectedStateId=n.id,f.pushState(n.id,n.title,n.url),p.Adapter.trigger(e,"popstate")),!0},p.replaceState=function(t,a,r,o){if(p.getHashByUrl(r)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==o&&p.busy())return p.pushQueue({scope:p,callback:p.replaceState,args:arguments,queue:o}),!1;p.busy(!0);var n=p.createStateObject(t,a,r);return p.isLastSavedState(n)?p.busy(!1):(p.storeState(n),p.expectedStateId=n.id,f.replaceState(n.id,n.title,n.url),p.Adapter.trigger(e,"popstate")),!0};if(n){try{p.store=u.parse(n.getItem("History.store"))||{}}catch(e){p.store={}}p.normalizeStore()}else p.store={},p.normalizeStore();p.Adapter.bind(e,"unload",p.clearAllIntervals),p.saveState(p.storeState(p.extractState(p.getLocationHref(),!0))),n&&(p.onUnload=function(){var e,t,a;try{e=u.parse(n.getItem("History.store"))||{}}catch(t){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in p.idToState)p.idToState.hasOwnProperty(t)&&(e.idToState[t]=p.idToState[t]);for(t in p.urlToId)p.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=p.urlToId[t]);for(t in p.stateToId)p.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=p.stateToId[t]);p.store=e,p.normalizeStore(),a=u.stringify(e);try{n.setItem("History.store",a)}catch(e){if(e.code!==DOMException.QUOTA_EXCEEDED_ERR)throw e;n.length&&(n.removeItem("History.store"),n.setItem("History.store",a))}},p.intervalList.push(l(p.onUnload,p.options.storeInterval)),p.Adapter.bind(e,"beforeunload",p.onUnload),p.Adapter.bind(e,"unload",p.onUnload)),p.emulated.pushState||(p.bugs.safariPoll&&p.intervalList.push(l(p.safariStatePoll,p.options.safariPollInterval)),"Apple Computer, Inc."!==o.vendor&&"Mozilla"!==(o.appCodeName||"")||(p.Adapter.bind(e,"hashchange",function(){p.Adapter.trigger(e,"popstate")}),p.getHash()&&p.Adapter.onDomLoad(function(){p.Adapter.trigger(e,"hashchange")})))},(!p.options||!p.options.delayInit)&&p.init()}(window);